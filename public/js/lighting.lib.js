var canvas3=document.getElementById("lighting"),ctx3=canvas3.getContext("2d");console.log(ctx3);var lightning=[],lightTimeCurrent=0,lightTimeTotal=0,w=canvas3.width=window.innerWidth,h=canvas3.height=window.innerHeight;function random(t,n){return Math.random()*(n-t+1)+t}function clearCanvas3(){ctx3.globalCompositeOperation="destination-out",ctx3.fillStyle="rgba(0,0,0,"+random(1,30)/100+")",ctx3.fillRect(0,0,w,h),ctx3.globalCompositeOperation="source-over"}function createLightning(){for(var t=random(100,w-100),n=random(0,h/4),a=random(1,3),i=0;i<a;i++)single={x:t,y:n,xRange:random(5,30),yRange:random(10,25),path:[{x:t,y:n}],pathLimit:random(40,55)},lightning.push(single)}function drawLightning(){for(var t=0;t<lightning.length;t++){var n=lightning[t];n.path.push({x:n.path[n.path.length-1].x+(random(0,n.xRange)-n.xRange/2),y:n.path[n.path.length-1].y+random(0,n.yRange)}),n.path.length>n.pathLimit&&lightning.splice(t,1),ctx3.strokeStyle="rgba(255, 255, 255, .1)",ctx3.lineWidth=1,ctx3.beginPath(),ctx3.moveTo(n.x,n.y);for(var a=0;a<n.path.length;a++)ctx3.lineTo(n.path[a].x,n.path[a].y);1===Math.floor(random(0,30))&&(ctx3.fillStyle="rgba(255, 255, 255, "+random(1,3)/100+")",ctx3.fillRect(0,0,w,h)),ctx3.lineJoin="miter",ctx3.stroke()}}function animateLightning(){clearCanvas3(),++lightTimeCurrent>=lightTimeTotal&&(createLightning(),lightTimeCurrent=0,lightTimeTotal=400),drawLightning()}function animloop(){animateLightning(),requestAnimationFrame(animloop)}console.log(w,h),animloop();